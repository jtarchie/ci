{{ define "_pipelines_content" }}
<input type="hidden" id="pipeline-page" name="page"
  value="{{ .Pagination.Page }}">
<input type="hidden" id="pipeline-per-page" name="per_page"
  value="{{ .Pagination.PerPage }}">
<div class="w-full overflow-x-auto">
  <table class="w-full min-w-[640px]">
    <thead class="bg-gray-50 dark:bg-gray-700">
      <tr>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
          Name
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
          Driver
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
          Latest Run
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
          Created
        </th>
        <th
          class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
          Actions
        </th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-600"
      id="pipelines-table">
      {{ template "_pipeline_rows" . }}
    </tbody>
  </table>
</div>
{{ if gt .Pagination.TotalPages 1 }}
<div
  class="flex items-center justify-between px-6 py-3 border-t border-gray-200 dark:border-gray-700"
  id="pipeline-pagination">
  <span class="text-sm text-gray-600 dark:text-gray-400">
    Page {{ .Pagination.Page }} of {{ .Pagination.TotalPages }}
  </span>
  <div class="flex gap-2">
    {{ if gt .Pagination.Page 1 }}
    <a
      href="/pipelines/?page={{ sub .Pagination.Page 1 }}&per_page={{ .Pagination.PerPage }}&q={{ .Query }}"
      class="px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded text-sm transition-colors">
      ← Previous
    </a>
    {{ end }}
    {{ if .Pagination.HasNext }}
    <a
      href="/pipelines/?page={{ add .Pagination.Page 1 }}&per_page={{ .Pagination.PerPage }}&q={{ .Query }}"
      class="px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
      Next →
    </a>
    {{ end }}
  </div>
</div>
{{ end }}
{{ end }}
