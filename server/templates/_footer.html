{{ define "footer" }}
    <footer class="bg-gray-50 dark:bg-gray-900" role="contentinfo">
      <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
        <div class="sm:flex sm:items-center sm:justify-between">
          <div
            class="flex justify-center text-teal-600 sm:justify-start dark:text-teal-300">
            <svg
              class="h-8"
              viewBox="0 0 100 40"
              xmlns="http://www.w3.org/2000/svg"
              role="img"
              aria-label="CI Status Indicator">
              <!-- Red LED Circle -->
              <circle
                cx="25"
                cy="20"
                r="15"
                fill="#FF3B30"
                stroke="#CC2D26"
                stroke-width="2">
                <!-- Light reflection effect -->
                <animate attributeName="opacity" from="0.9" to="1" dur="2s"
                  repeatCount="indefinite" />
              </circle>
              <!-- White reflection spot on red LED -->
              <circle
                cx="20"
                cy="15"
                r="5"
                fill="white"
                opacity="0.3" />

              <!-- Green LED Circle -->
              <circle
                cx="75"
                cy="20"
                r="15"
                fill="#34C759"
                stroke="#28A745"
                stroke-width="2">
                <!-- Light reflection effect -->
                <animate attributeName="opacity" from="0.9" to="1" dur="1.5s"
                  repeatCount="indefinite" />
              </circle>
              <!-- White reflection spot on green LED -->
              <circle
                cx="70"
                cy="15"
                r="5"
                fill="white"
                opacity="0.3" />
            </svg>
          </div>
          <p
            class="mt-4 text-center text-sm text-gray-500 lg:mt-0 lg:text-right dark:text-gray-400">
            Copyright &copy; <a href="https://github.com/jtarchie/ci"
              class="hover:text-gray-900 dark:hover:text-white">{{ now |
              date "2006" }}</a>. All rights reserved.
          </p>
        </div>
      </div>
    </footer>
{{ end }}

{{ define "toast-container" }}
    <!-- Toast notification container -->
    <div id="toast-container"
      class="fixed bottom-2 right-2 left-2 sm:left-auto sm:bottom-4 sm:right-4 z-50 space-y-2"
      role="region"
      aria-label="Notifications"
      aria-live="polite"
      aria-atomic="false"></div>
{{ end }}

{{ define "end" }}
  <script>
    (function () {
      // Close open <details> dropdowns when clicking outside
      document.addEventListener('click', function (e) {
        document.querySelectorAll('details[open]').forEach(function (d) {
          if (!d.contains(e.target)) d.removeAttribute('open');
        });
      });

      function updateElapsed() {
        document.querySelectorAll('[data-elapsed-start]').forEach(function (el) {
          var start = new Date(el.dataset.elapsedStart);
          if (isNaN(start)) return;
          var secs = Math.max(0, Math.floor((Date.now() - start) / 1000));
          var h = Math.floor(secs / 3600);
          var m = Math.floor((secs % 3600) / 60);
          var s = secs % 60;
          if (h > 0) el.textContent = h + 'h ' + m + 'm ' + s + 's';
          else if (m > 0) el.textContent = m + 'm ' + s + 's';
          else el.textContent = s + 's';
        });
      }
      updateElapsed();
      setInterval(updateElapsed, 1000);
    })();
  </script>
  </body>
</html>
{{ end }}
