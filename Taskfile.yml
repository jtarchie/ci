version: 3

tasks:
  default:
    cmds:
    - gofmt -w .
    - golangci-lint run ./... --fix
    - go test -race ./...
    - docker rm -f $(docker ps -aq) || true